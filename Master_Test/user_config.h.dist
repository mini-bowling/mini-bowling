// =====================================================
// USER CONFIGURATION
// Adjustable settings for the pinsetter
// Modify these values to calibrate your machine
// =====================================================

#ifndef USER_CONFIG_H
#define USER_CONFIG_H

// =====================================================
// LED STRIP LENGTHS
// Left and right can be set independently if needed
// =====================================================
#define DECK_LED_LENGTH_L   11    // Left deck strip.  DEFAULT: 11
#define DECK_LED_LENGTH_R   11    // Right deck strip. DEFAULT: 11
#define LANE_LED_LENGTH_L   41    // Left lane strip.  DEFAULT: 41
#define LANE_LED_LENGTH_R   41    // Right lane strip. DEFAULT: 41

// =====================================================
// CONVEYOR SETTINGS
// =====================================================
// Set to 1 if relay is active HIGH, 0 if active LOW.
#define CONVEYOR_ACTIVE_HIGH 1    // DEFAULT: 1

// =====================================================
// LED BRIGHTNESS (0-255)
// =====================================================
#define LED_BRIGHTNESS_NORMAL 80  // DEFAULT: 80

// =====================================================
// SWEEP SERVO ANGLES
// Left and Right servos are mirrored (R = 180 - L)
// =====================================================
#define SWEEP_GUARD_ANGLE   50    // Guard position.  DEFAULT: 50
#define SWEEP_UP_ANGLE      85    // Up position.     DEFAULT: 85
#define SWEEP_BACK_ANGLE    0     // Back position.   DEFAULT: 0
// Tweening is what slows the sweep down, instead of moving fast from position to position.
// This is the duration it will spend to move between different positions, in ms.
// Bigger number is slower, smaller number is faster. Default is half a second, 500.
#define SWEEP_TWEEN_MS      500   // Tween duration.  DEFAULT: 500

// =====================================================
// BALL DOOR SERVO ANGLES
// =====================================================
#define BALL_DOOR_OPEN_ANGLE    180  // DEFAULT: 180
#define BALL_DOOR_CLOSED_ANGLE  0    // DEFAULT: 0

// =====================================================
// SCISSOR SERVO ANGLES
// =====================================================
#define SCISSOR_GRAB_ANGLE  140   // DEFAULT: 140
#define SCISSOR_DROP_ANGLE  90    // DEFAULT: 90

// =====================================================
// SLIDING DECK SERVO ANGLES
// =====================================================
#define SLIDER_HOME_ANGLE       180  // Home / Catch position. DEFAULT: 180
#define SLIDER_RELEASE_ANGLE    100  // Release position. DEFAULT: 100

// =====================================================
// RAISE SERVO ANGLES
// Left and Right servos are mirrored (R = 180 - L)
// =====================================================
#define RAISE_UP_ANGLE_L        180  // Up position left. DEFAULT: 180
#define RAISE_UP_ANGLE_R        0    // Up position right. DEFAULT: 0
#define RAISE_DOWN_ANGLE_L      20   // Down/Set position left. DEFAULT: 20
#define RAISE_DOWN_ANGLE_R      160  // Down/Set position right. DEFAULT: 160
#define RAISE_GRAB_ANGLE_L      60   // Grab position left. DEFAULT: 60
#define RAISE_GRAB_ANGLE_R      120  // Grab position right. DEFAULT: 120
#define RAISE_DROP_ANGLE_L      80   // Drop position left. DEFAULT: 80
#define RAISE_DROP_ANGLE_R      100  // Drop position right. DEFAULT: 100

// =====================================================
// TURRET STEPPER SETTINGS.
// =====================================================
// Defaults are listed on settings that are commonly adjusted.
#define TURRET_NORMAL_MAXSPEED  650.0
#define TURRET_NORMAL_ACCEL     3000.0
#define TURRET_SPRING_MAXSPEED  300.0
#define TURRET_SPRING_ACCEL     1500.0

// Home position adjuster (fine-tune after homing).
// Less negative means CCW
#define TURRET_HOME_ADJUSTER    -63     // DEFAULT: -63

// Pin release offset for position 10
#define TURRET_PIN10_RELEASE_OFFSET -30

// =====================================================
// TURRET PIN POSITIONS (steps from home)
// =====================================================
// These are the step positions for each pin slot
// Slot 0 is unused, slots 1-9 are pins, slot 10 is release
#define PIN_POS_0       0
#define PIN_POS_1       -133
#define PIN_POS_2       -267
#define PIN_POS_3       -400
#define PIN_POS_4       -667
#define PIN_POS_5       -800
#define PIN_POS_6       -933
#define PIN_POS_7       -1200
#define PIN_POS_8       -1333
#define PIN_POS_9       -1467
#define PIN_POS_10      -1600

// =====================================================
// INPUT DEBOUNCE TIME (milliseconds)
// =====================================================
#define DEBOUNCE_MS     50

// =====================================================
// IR FLAP DETECTION
// Auto-disables IR monitoring on rapid toggling
// =====================================================
#define IR_FLAP_COUNT       5     // Toggles within window to trigger
#define IR_FLAP_WINDOW_MS   200   // Window in ms

// =====================================================
// SCISSOR CYCLE TIMING (milliseconds)
// =====================================================
#define SCISSOR_CYCLE_MS    2000  // DEFAULT: 2000

// =====================================================
// LED ANIMATION TIMING (milliseconds)
// =====================================================
#define WIPE_MS             500
#define WIPE_FRAME_MS       15
#define FLASH_ON_MS         120
#define FLASH_OFF_MS        120
#define FLASH_COUNT         5
#define COMET_MS            500
#define COMET_FRAME_MS      15
#define COMET_LEN           4
#define RAINBOW_FRAME_MS    20

// =====================================================
// PIN DROP SEQUENCE TIMING (milliseconds)
// =====================================================
#define PDROP_SETTLE_MS     500   // Pause for small servo moves (scissor, slider)
#define PDROP_RAISE_SETTLE_MS 1300 // Pause for raise servo to complete full travel. DEFAULT: 1300
#define PDROP_DROP_MS       800   // Pause for pins to fall after slider release

// =====================================================
// TURRET LOAD SEQUENCE TIMING (milliseconds)
// =====================================================
#define TLOAD_CATCH_DELAY_MS   800   // Pause after catching pin at slots 1-8
#define TLOAD_RELEASE_DWELL_MS 1000  // Dwell at release position for pins to fall
#define TLOAD_NINTH_SETTLE_MS  300   // Settle time after 9th pin caught

// =====================================================
// FRAME LED BLINK INTERVAL (milliseconds)
// =====================================================
#define FRAME_BLINK_INTERVAL 500

#endif // USER_CONFIG_H
